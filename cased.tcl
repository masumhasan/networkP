# Define options
set val(chan)		Channel/WirelessChannel		;# channel type
set val(prop)		Propagation/TwoRayGround    ;# radio-propagation model
set val(netif)		Phy/WirelessPhy		    	;# network interface type

set val(mac)		Mac/802_11		    		;# MAC Type
set val(ifq)		Queue/DropTail/PriQueue     ;# interface queue type
set val(ll)			LL			    			;# link layer type
set val(ant)		Antenna/OmniAntenna	  	 	;# antenna model
set val(ifqlen)		1000			 		  	;# max packet in ifq
set val(nn)			250  						;# number of mobilnodes
set val(rp)			AODV			    		;# routing protocol
set val(x)			2000			    		;# X dimensions of topography
set val(y)			2000			    		;# Y dimensions of topography
set val(stop)		150			    			;# time of simulation end

set ns		[new Simulator]
set tracefd	  [open d.tr w]
set namtrace	  [open d.nam w]

$ns trace-all $tracefd
$ns namtrace-all-wireless $namtrace $val(x) $val(y)

#set up topography object
set topo      [new Topography]

$topo load_flatgrid $val(x) $val(y)

create-god $val(nn)

#
# Create nn mobilenodes [$val(nn)] and attach them to the channel.
#

# configure the nodes
	$ns node-config -adhocRouting $val(rp) \
	     -llType $val(ll) \
	     -macType $val(mac) \
	     -ifqType $val(ifq) \
	     -ifqLen $val(ifqlen) \
	     -antType $val(ant) \
	     -propType $val(prop) \
	     -phyType $val(netif) \
	     -channelType $val(chan) \
	     -topoInstance $topo \
	     -agentTrace ON \
	     -routerTrace ON \
	     -macTrace OFF \
	     -movementTrace ON




set node_(0) [$ns node]
$node_(0) set X_ 1376
$node_(0) set Y_ 1687
$node_(0) set Z_ 0
set node_(1) [$ns node]
$node_(1) set X_ 302
$node_(1) set Y_ 1411
$node_(1) set Z_ 0
set node_(2) [$ns node]
$node_(2) set X_ 1935
$node_(2) set Y_ 1601
$node_(2) set Z_ 0
set node_(3) [$ns node]
$node_(3) set X_ 394
$node_(3) set Y_ 667
$node_(3) set Z_ 0
set node_(4) [$ns node]
$node_(4) set X_ 845
$node_(4) set Y_ 1086
$node_(4) set Z_ 0
set node_(5) [$ns node]
$node_(5) set X_ 693
$node_(5) set Y_ 1145
$node_(5) set Z_ 0
set node_(6) [$ns node]
$node_(6) set X_ 208
$node_(6) set Y_ 533
$node_(6) set Z_ 0
set node_(7) [$ns node]
$node_(7) set X_ 1676
$node_(7) set Y_ 635
$node_(7) set Z_ 0
set node_(8) [$ns node]
$node_(8) set X_ 438
$node_(8) set Y_ 584
$node_(8) set Z_ 0
set node_(9) [$ns node]
$node_(9) set X_ 1735
$node_(9) set Y_ 1798
$node_(9) set Z_ 0
set node_(10) [$ns node]
$node_(10) set X_ 512
$node_(10) set Y_ 729
$node_(10) set Z_ 0
set node_(11) [$ns node]
$node_(11) set X_ 203
$node_(11) set Y_ 1909
$node_(11) set Z_ 0
set node_(12) [$ns node]
$node_(12) set X_ 382
$node_(12) set Y_ 562
$node_(12) set Z_ 0
set node_(13) [$ns node]
$node_(13) set X_ 515
$node_(13) set Y_ 201
$node_(13) set Z_ 0
set node_(14) [$ns node]
$node_(14) set X_ 963
$node_(14) set Y_ 311
$node_(14) set Z_ 0
set node_(15) [$ns node]
$node_(15) set X_ 1771
$node_(15) set Y_ 482
$node_(15) set Z_ 0
set node_(16) [$ns node]
$node_(16) set X_ 1416
$node_(16) set Y_ 1092
$node_(16) set Z_ 0
set node_(17) [$ns node]
$node_(17) set X_ 1207
$node_(17) set Y_ 1067
$node_(17) set Z_ 0
set node_(18) [$ns node]
$node_(18) set X_ 329
$node_(18) set Y_ 685
$node_(18) set Z_ 0
set node_(19) [$ns node]
$node_(19) set X_ 22
$node_(19) set Y_ 390
$node_(19) set Z_ 0
set node_(20) [$ns node]
$node_(20) set X_ 315
$node_(20) set Y_ 240
$node_(20) set Z_ 0
set node_(21) [$ns node]
$node_(21) set X_ 904
$node_(21) set Y_ 1363
$node_(21) set Z_ 0
set node_(22) [$ns node]
$node_(22) set X_ 170
$node_(22) set Y_ 635
$node_(22) set Z_ 0
set node_(23) [$ns node]
$node_(23) set X_ 533
$node_(23) set Y_ 1094
$node_(23) set Z_ 0
set node_(24) [$ns node]
$node_(24) set X_ 156
$node_(24) set Y_ 730
$node_(24) set Z_ 0
set node_(25) [$ns node]
$node_(25) set X_ 74
$node_(25) set Y_ 1952
$node_(25) set Z_ 0
set node_(26) [$ns node]
$node_(26) set X_ 262
$node_(26) set Y_ 294
$node_(26) set Z_ 0
set node_(27) [$ns node]
$node_(27) set X_ 403
$node_(27) set Y_ 809
$node_(27) set Z_ 0
set node_(28) [$ns node]
$node_(28) set X_ 809
$node_(28) set Y_ 508
$node_(28) set Z_ 0
set node_(29) [$ns node]
$node_(29) set X_ 278
$node_(29) set Y_ 666
$node_(29) set Z_ 0
set node_(30) [$ns node]
$node_(30) set X_ 1196
$node_(30) set Y_ 322
$node_(30) set Z_ 0
set node_(31) [$ns node]
$node_(31) set X_ 141
$node_(31) set Y_ 1668
$node_(31) set Z_ 0
set node_(32) [$ns node]
$node_(32) set X_ 813
$node_(32) set Y_ 23
$node_(32) set Z_ 0
set node_(33) [$ns node]
$node_(33) set X_ 570
$node_(33) set Y_ 506
$node_(33) set Z_ 0
set node_(34) [$ns node]
$node_(34) set X_ 1549
$node_(34) set Y_ 441
$node_(34) set Z_ 0
set node_(35) [$ns node]
$node_(35) set X_ 1391
$node_(35) set Y_ 780
$node_(35) set Z_ 0
set node_(36) [$ns node]
$node_(36) set X_ 1381
$node_(36) set Y_ 997
$node_(36) set Z_ 0
set node_(37) [$ns node]
$node_(37) set X_ 1554
$node_(37) set Y_ 1665
$node_(37) set Z_ 0
set node_(38) [$ns node]
$node_(38) set X_ 130
$node_(38) set Y_ 793
$node_(38) set Z_ 0
set node_(39) [$ns node]
$node_(39) set X_ 1030
$node_(39) set Y_ 191
$node_(39) set Z_ 0
set node_(40) [$ns node]
$node_(40) set X_ 1265
$node_(40) set Y_ 1715
$node_(40) set Z_ 0
set node_(41) [$ns node]
$node_(41) set X_ 1343
$node_(41) set Y_ 77
$node_(41) set Z_ 0
set node_(42) [$ns node]
$node_(42) set X_ 123
$node_(42) set Y_ 332
$node_(42) set Z_ 0
set node_(43) [$ns node]
$node_(43) set X_ 815
$node_(43) set Y_ 356
$node_(43) set Z_ 0
set node_(44) [$ns node]
$node_(44) set X_ 1898
$node_(44) set Y_ 779
$node_(44) set Z_ 0
set node_(45) [$ns node]
$node_(45) set X_ 1491
$node_(45) set Y_ 1231
$node_(45) set Z_ 0
set node_(46) [$ns node]
$node_(46) set X_ 1474
$node_(46) set Y_ 1179
$node_(46) set Z_ 0
set node_(47) [$ns node]
$node_(47) set X_ 81
$node_(47) set Y_ 1613
$node_(47) set Z_ 0
set node_(48) [$ns node]
$node_(48) set X_ 1981
$node_(48) set Y_ 6
$node_(48) set Z_ 0
set node_(49) [$ns node]
$node_(49) set X_ 824
$node_(49) set Y_ 255
$node_(49) set Z_ 0
set node_(50) [$ns node]
$node_(50) set X_ 841
$node_(50) set Y_ 1718
$node_(50) set Z_ 0
set node_(51) [$ns node]
$node_(51) set X_ 540
$node_(51) set Y_ 1328
$node_(51) set Z_ 0
set node_(52) [$ns node]
$node_(52) set X_ 824
$node_(52) set Y_ 1370
$node_(52) set Z_ 0
set node_(53) [$ns node]
$node_(53) set X_ 470
$node_(53) set Y_ 168
$node_(53) set Z_ 0
set node_(54) [$ns node]
$node_(54) set X_ 297
$node_(54) set Y_ 606
$node_(54) set Z_ 0
set node_(55) [$ns node]
$node_(55) set X_ 1849
$node_(55) set Y_ 1883
$node_(55) set Z_ 0
set node_(56) [$ns node]
$node_(56) set X_ 61
$node_(56) set Y_ 385
$node_(56) set Z_ 0
set node_(57) [$ns node]
$node_(57) set X_ 695
$node_(57) set Y_ 1957
$node_(57) set Z_ 0
set node_(58) [$ns node]
$node_(58) set X_ 761
$node_(58) set Y_ 1462
$node_(58) set Z_ 0
set node_(59) [$ns node]
$node_(59) set X_ 1555
$node_(59) set Y_ 1352
$node_(59) set Z_ 0
set node_(60) [$ns node]
$node_(60) set X_ 1358
$node_(60) set Y_ 1096
$node_(60) set Z_ 0
set node_(61) [$ns node]
$node_(61) set X_ 946
$node_(61) set Y_ 1446
$node_(61) set Z_ 0
set node_(62) [$ns node]
$node_(62) set X_ 161
$node_(62) set Y_ 202
$node_(62) set Z_ 0
set node_(63) [$ns node]
$node_(63) set X_ 593
$node_(63) set Y_ 1765
$node_(63) set Z_ 0
set node_(64) [$ns node]
$node_(64) set X_ 508
$node_(64) set Y_ 350
$node_(64) set Z_ 0
set node_(65) [$ns node]
$node_(65) set X_ 1205
$node_(65) set Y_ 645
$node_(65) set Z_ 0
set node_(66) [$ns node]
$node_(66) set X_ 941
$node_(66) set Y_ 830
$node_(66) set Z_ 0
set node_(67) [$ns node]
$node_(67) set X_ 1356
$node_(67) set Y_ 885
$node_(67) set Z_ 0
set node_(68) [$ns node]
$node_(68) set X_ 609
$node_(68) set Y_ 1059
$node_(68) set Z_ 0
set node_(69) [$ns node]
$node_(69) set X_ 1621
$node_(69) set Y_ 1820
$node_(69) set Z_ 0
set node_(70) [$ns node]
$node_(70) set X_ 1001
$node_(70) set Y_ 1060
$node_(70) set Z_ 0
set node_(71) [$ns node]
$node_(71) set X_ 433
$node_(71) set Y_ 1398
$node_(71) set Z_ 0
set node_(72) [$ns node]
$node_(72) set X_ 1203
$node_(72) set Y_ 989
$node_(72) set Z_ 0
set node_(73) [$ns node]
$node_(73) set X_ 1329
$node_(73) set Y_ 462
$node_(73) set Z_ 0
set node_(74) [$ns node]
$node_(74) set X_ 440
$node_(74) set Y_ 382
$node_(74) set Z_ 0
set node_(75) [$ns node]
$node_(75) set X_ 408
$node_(75) set Y_ 919
$node_(75) set Z_ 0
set node_(76) [$ns node]
$node_(76) set X_ 1732
$node_(76) set Y_ 1872
$node_(76) set Z_ 0
set node_(77) [$ns node]
$node_(77) set X_ 1635
$node_(77) set Y_ 1845
$node_(77) set Z_ 0
set node_(78) [$ns node]
$node_(78) set X_ 583
$node_(78) set Y_ 1388
$node_(78) set Z_ 0
set node_(79) [$ns node]
$node_(79) set X_ 1217
$node_(79) set Y_ 504
$node_(79) set Z_ 0
set node_(80) [$ns node]
$node_(80) set X_ 1676
$node_(80) set Y_ 1602
$node_(80) set Z_ 0
set node_(81) [$ns node]
$node_(81) set X_ 815
$node_(81) set Y_ 1150
$node_(81) set Z_ 0
set node_(82) [$ns node]
$node_(82) set X_ 0
$node_(82) set Y_ 596
$node_(82) set Z_ 0
set node_(83) [$ns node]
$node_(83) set X_ 1654
$node_(83) set Y_ 1082
$node_(83) set Z_ 0
set node_(84) [$ns node]
$node_(84) set X_ 2
$node_(84) set Y_ 1856
$node_(84) set Z_ 0
set node_(85) [$ns node]
$node_(85) set X_ 1048
$node_(85) set Y_ 1943
$node_(85) set Z_ 0
set node_(86) [$ns node]
$node_(86) set X_ 781
$node_(86) set Y_ 251
$node_(86) set Z_ 0
set node_(87) [$ns node]
$node_(87) set X_ 1845
$node_(87) set Y_ 1237
$node_(87) set Z_ 0
set node_(88) [$ns node]
$node_(88) set X_ 1456
$node_(88) set Y_ 197
$node_(88) set Z_ 0
set node_(89) [$ns node]
$node_(89) set X_ 1979
$node_(89) set Y_ 1193
$node_(89) set Z_ 0
set node_(90) [$ns node]
$node_(90) set X_ 124
$node_(90) set Y_ 1608
$node_(90) set Z_ 0
set node_(91) [$ns node]
$node_(91) set X_ 1545
$node_(91) set Y_ 201
$node_(91) set Z_ 0
set node_(92) [$ns node]
$node_(92) set X_ 1988
$node_(92) set Y_ 575
$node_(92) set Z_ 0
set node_(93) [$ns node]
$node_(93) set X_ 1109
$node_(93) set Y_ 820
$node_(93) set Z_ 0
set node_(94) [$ns node]
$node_(94) set X_ 361
$node_(94) set Y_ 1620
$node_(94) set Z_ 0
set node_(95) [$ns node]
$node_(95) set X_ 1738
$node_(95) set Y_ 1830
$node_(95) set Z_ 0
set node_(96) [$ns node]
$node_(96) set X_ 461
$node_(96) set Y_ 1547
$node_(96) set Z_ 0
set node_(97) [$ns node]
$node_(97) set X_ 725
$node_(97) set Y_ 1146
$node_(97) set Z_ 0
set node_(98) [$ns node]
$node_(98) set X_ 1146
$node_(98) set Y_ 839
$node_(98) set Z_ 0
set node_(99) [$ns node]
$node_(99) set X_ 1170
$node_(99) set Y_ 840
$node_(99) set Z_ 0
set node_(100) [$ns node]
$node_(100) set X_ 234
$node_(100) set Y_ 33
$node_(100) set Z_ 0
set node_(101) [$ns node]
$node_(101) set X_ 1357
$node_(101) set Y_ 1021
$node_(101) set Z_ 0
set node_(102) [$ns node]
$node_(102) set X_ 1377
$node_(102) set Y_ 1352
$node_(102) set Z_ 0
set node_(103) [$ns node]
$node_(103) set X_ 1667
$node_(103) set Y_ 62
$node_(103) set Z_ 0
set node_(104) [$ns node]
$node_(104) set X_ 880
$node_(104) set Y_ 552
$node_(104) set Z_ 0
set node_(105) [$ns node]
$node_(105) set X_ 368
$node_(105) set Y_ 1200
$node_(105) set Z_ 0
set node_(106) [$ns node]
$node_(106) set X_ 1165
$node_(106) set Y_ 1933
$node_(106) set Z_ 0
set node_(107) [$ns node]
$node_(107) set X_ 726
$node_(107) set Y_ 1520
$node_(107) set Z_ 0
set node_(108) [$ns node]
$node_(108) set X_ 765
$node_(108) set Y_ 806
$node_(108) set Z_ 0
set node_(109) [$ns node]
$node_(109) set X_ 1243
$node_(109) set Y_ 1356
$node_(109) set Z_ 0
set node_(110) [$ns node]
$node_(110) set X_ 747
$node_(110) set Y_ 130
$node_(110) set Z_ 0
set node_(111) [$ns node]
$node_(111) set X_ 1287
$node_(111) set Y_ 1307
$node_(111) set Z_ 0
set node_(112) [$ns node]
$node_(112) set X_ 84
$node_(112) set Y_ 1912
$node_(112) set Z_ 0
set node_(113) [$ns node]
$node_(113) set X_ 779
$node_(113) set Y_ 1978
$node_(113) set Z_ 0
set node_(114) [$ns node]
$node_(114) set X_ 318
$node_(114) set Y_ 24
$node_(114) set Z_ 0
set node_(115) [$ns node]
$node_(115) set X_ 1534
$node_(115) set Y_ 344
$node_(115) set Z_ 0
set node_(116) [$ns node]
$node_(116) set X_ 674
$node_(116) set Y_ 1116
$node_(116) set Z_ 0
set node_(117) [$ns node]
$node_(117) set X_ 1717
$node_(117) set Y_ 1537
$node_(117) set Z_ 0
set node_(118) [$ns node]
$node_(118) set X_ 189
$node_(118) set Y_ 370
$node_(118) set Z_ 0
set node_(119) [$ns node]
$node_(119) set X_ 353
$node_(119) set Y_ 1529
$node_(119) set Z_ 0
set node_(120) [$ns node]
$node_(120) set X_ 415
$node_(120) set Y_ 1290
$node_(120) set Z_ 0
set node_(121) [$ns node]
$node_(121) set X_ 1251
$node_(121) set Y_ 1
$node_(121) set Z_ 0
set node_(122) [$ns node]
$node_(122) set X_ 753
$node_(122) set Y_ 720
$node_(122) set Z_ 0
set node_(123) [$ns node]
$node_(123) set X_ 84
$node_(123) set Y_ 60
$node_(123) set Z_ 0
set node_(124) [$ns node]
$node_(124) set X_ 307
$node_(124) set Y_ 1959
$node_(124) set Z_ 0
set node_(125) [$ns node]
$node_(125) set X_ 1738
$node_(125) set Y_ 798
$node_(125) set Z_ 0
set node_(126) [$ns node]
$node_(126) set X_ 1583
$node_(126) set Y_ 617
$node_(126) set Z_ 0
set node_(127) [$ns node]
$node_(127) set X_ 600
$node_(127) set Y_ 1791
$node_(127) set Z_ 0
set node_(128) [$ns node]
$node_(128) set X_ 1560
$node_(128) set Y_ 1431
$node_(128) set Z_ 0
set node_(129) [$ns node]
$node_(129) set X_ 1330
$node_(129) set Y_ 1360
$node_(129) set Z_ 0
set node_(130) [$ns node]
$node_(130) set X_ 1536
$node_(130) set Y_ 822
$node_(130) set Z_ 0
set node_(131) [$ns node]
$node_(131) set X_ 690
$node_(131) set Y_ 952
$node_(131) set Z_ 0
set node_(132) [$ns node]
$node_(132) set X_ 1802
$node_(132) set Y_ 566
$node_(132) set Z_ 0
set node_(133) [$ns node]
$node_(133) set X_ 316
$node_(133) set Y_ 775
$node_(133) set Z_ 0
set node_(134) [$ns node]
$node_(134) set X_ 1651
$node_(134) set Y_ 944
$node_(134) set Z_ 0
set node_(135) [$ns node]
$node_(135) set X_ 798
$node_(135) set Y_ 1612
$node_(135) set Z_ 0
set node_(136) [$ns node]
$node_(136) set X_ 402
$node_(136) set Y_ 405
$node_(136) set Z_ 0
set node_(137) [$ns node]
$node_(137) set X_ 979
$node_(137) set Y_ 628
$node_(137) set Z_ 0
set node_(138) [$ns node]
$node_(138) set X_ 252
$node_(138) set Y_ 1186
$node_(138) set Z_ 0
set node_(139) [$ns node]
$node_(139) set X_ 1565
$node_(139) set Y_ 46
$node_(139) set Z_ 0
set node_(140) [$ns node]
$node_(140) set X_ 158
$node_(140) set Y_ 1952
$node_(140) set Z_ 0
set node_(141) [$ns node]
$node_(141) set X_ 1542
$node_(141) set Y_ 1661
$node_(141) set Z_ 0
set node_(142) [$ns node]
$node_(142) set X_ 332
$node_(142) set Y_ 1798
$node_(142) set Z_ 0
set node_(143) [$ns node]
$node_(143) set X_ 1101
$node_(143) set Y_ 827
$node_(143) set Z_ 0
set node_(144) [$ns node]
$node_(144) set X_ 1447
$node_(144) set Y_ 1591
$node_(144) set Z_ 0
set node_(145) [$ns node]
$node_(145) set X_ 175
$node_(145) set Y_ 969
$node_(145) set Z_ 0
set node_(146) [$ns node]
$node_(146) set X_ 1373
$node_(146) set Y_ 1105
$node_(146) set Z_ 0
set node_(147) [$ns node]
$node_(147) set X_ 412
$node_(147) set Y_ 712
$node_(147) set Z_ 0
set node_(148) [$ns node]
$node_(148) set X_ 2
$node_(148) set Y_ 81
$node_(148) set Z_ 0
set node_(149) [$ns node]
$node_(149) set X_ 1586
$node_(149) set Y_ 468
$node_(149) set Z_ 0
set node_(150) [$ns node]
$node_(150) set X_ 1731
$node_(150) set Y_ 1872
$node_(150) set Z_ 0
set node_(151) [$ns node]
$node_(151) set X_ 1369
$node_(151) set Y_ 265
$node_(151) set Z_ 0
set node_(152) [$ns node]
$node_(152) set X_ 980
$node_(152) set Y_ 818
$node_(152) set Z_ 0
set node_(153) [$ns node]
$node_(153) set X_ 1994
$node_(153) set Y_ 106
$node_(153) set Z_ 0
set node_(154) [$ns node]
$node_(154) set X_ 177
$node_(154) set Y_ 290
$node_(154) set Z_ 0
set node_(155) [$ns node]
$node_(155) set X_ 791
$node_(155) set Y_ 1303
$node_(155) set Z_ 0
set node_(156) [$ns node]
$node_(156) set X_ 1699
$node_(156) set Y_ 1171
$node_(156) set Z_ 0
set node_(157) [$ns node]
$node_(157) set X_ 1064
$node_(157) set Y_ 717
$node_(157) set Z_ 0
set node_(158) [$ns node]
$node_(158) set X_ 760
$node_(158) set Y_ 340
$node_(158) set Z_ 0
set node_(159) [$ns node]
$node_(159) set X_ 152
$node_(159) set Y_ 1514
$node_(159) set Z_ 0
set node_(160) [$ns node]
$node_(160) set X_ 95
$node_(160) set Y_ 440
$node_(160) set Z_ 0
set node_(161) [$ns node]
$node_(161) set X_ 954
$node_(161) set Y_ 956
$node_(161) set Z_ 0
set node_(162) [$ns node]
$node_(162) set X_ 1943
$node_(162) set Y_ 877
$node_(162) set Z_ 0
set node_(163) [$ns node]
$node_(163) set X_ 1593
$node_(163) set Y_ 1472
$node_(163) set Z_ 0
set node_(164) [$ns node]
$node_(164) set X_ 139
$node_(164) set Y_ 1424
$node_(164) set Z_ 0
set node_(165) [$ns node]
$node_(165) set X_ 944
$node_(165) set Y_ 832
$node_(165) set Z_ 0
set node_(166) [$ns node]
$node_(166) set X_ 1497
$node_(166) set Y_ 1093
$node_(166) set Z_ 0
set node_(167) [$ns node]
$node_(167) set X_ 1884
$node_(167) set Y_ 1025
$node_(167) set Z_ 0
set node_(168) [$ns node]
$node_(168) set X_ 1716
$node_(168) set Y_ 1912
$node_(168) set Z_ 0
set node_(169) [$ns node]
$node_(169) set X_ 693
$node_(169) set Y_ 1802
$node_(169) set Z_ 0
set node_(170) [$ns node]
$node_(170) set X_ 198
$node_(170) set Y_ 1657
$node_(170) set Z_ 0
set node_(171) [$ns node]
$node_(171) set X_ 693
$node_(171) set Y_ 190
$node_(171) set Z_ 0
set node_(172) [$ns node]
$node_(172) set X_ 396
$node_(172) set Y_ 1712
$node_(172) set Z_ 0
set node_(173) [$ns node]
$node_(173) set X_ 1032
$node_(173) set Y_ 1747
$node_(173) set Z_ 0
set node_(174) [$ns node]
$node_(174) set X_ 1575
$node_(174) set Y_ 1064
$node_(174) set Z_ 0
set node_(175) [$ns node]
$node_(175) set X_ 1245
$node_(175) set Y_ 1306
$node_(175) set Z_ 0
set node_(176) [$ns node]
$node_(176) set X_ 275
$node_(176) set Y_ 1680
$node_(176) set Z_ 0
set node_(177) [$ns node]
$node_(177) set X_ 599
$node_(177) set Y_ 1897
$node_(177) set Z_ 0
set node_(178) [$ns node]
$node_(178) set X_ 1313
$node_(178) set Y_ 1139
$node_(178) set Z_ 0
set node_(179) [$ns node]
$node_(179) set X_ 355
$node_(179) set Y_ 567
$node_(179) set Z_ 0
set node_(180) [$ns node]
$node_(180) set X_ 1919
$node_(180) set Y_ 1199
$node_(180) set Z_ 0
set node_(181) [$ns node]
$node_(181) set X_ 1416
$node_(181) set Y_ 1412
$node_(181) set Z_ 0
set node_(182) [$ns node]
$node_(182) set X_ 1976
$node_(182) set Y_ 1971
$node_(182) set Z_ 0
set node_(183) [$ns node]
$node_(183) set X_ 1087
$node_(183) set Y_ 640
$node_(183) set Z_ 0
set node_(184) [$ns node]
$node_(184) set X_ 1699
$node_(184) set Y_ 487
$node_(184) set Z_ 0
set node_(185) [$ns node]
$node_(185) set X_ 994
$node_(185) set Y_ 551
$node_(185) set Z_ 0
set node_(186) [$ns node]
$node_(186) set X_ 760
$node_(186) set Y_ 1768
$node_(186) set Z_ 0
set node_(187) [$ns node]
$node_(187) set X_ 353
$node_(187) set Y_ 58
$node_(187) set Z_ 0
set node_(188) [$ns node]
$node_(188) set X_ 860
$node_(188) set Y_ 14
$node_(188) set Z_ 0
set node_(189) [$ns node]
$node_(189) set X_ 1456
$node_(189) set Y_ 977
$node_(189) set Z_ 0
set node_(190) [$ns node]
$node_(190) set X_ 209
$node_(190) set Y_ 1463
$node_(190) set Z_ 0
set node_(191) [$ns node]
$node_(191) set X_ 1382
$node_(191) set Y_ 938
$node_(191) set Z_ 0
set node_(192) [$ns node]
$node_(192) set X_ 360
$node_(192) set Y_ 1679
$node_(192) set Z_ 0
set node_(193) [$ns node]
$node_(193) set X_ 1298
$node_(193) set Y_ 109
$node_(193) set Z_ 0
set node_(194) [$ns node]
$node_(194) set X_ 1395
$node_(194) set Y_ 18
$node_(194) set Z_ 0
set node_(195) [$ns node]
$node_(195) set X_ 217
$node_(195) set Y_ 1557
$node_(195) set Z_ 0
set node_(196) [$ns node]
$node_(196) set X_ 1073
$node_(196) set Y_ 375
$node_(196) set Z_ 0
set node_(197) [$ns node]
$node_(197) set X_ 1455
$node_(197) set Y_ 1592
$node_(197) set Z_ 0
set node_(198) [$ns node]
$node_(198) set X_ 1909
$node_(198) set Y_ 1093
$node_(198) set Z_ 0
set node_(199) [$ns node]
$node_(199) set X_ 1900
$node_(199) set Y_ 718
$node_(199) set Z_ 0
set node_(200) [$ns node]
$node_(200) set X_ 1957
$node_(200) set Y_ 191
$node_(200) set Z_ 0
set node_(201) [$ns node]
$node_(201) set X_ 1102
$node_(201) set Y_ 1244
$node_(201) set Z_ 0
set node_(202) [$ns node]
$node_(202) set X_ 1845
$node_(202) set Y_ 1731
$node_(202) set Z_ 0
set node_(203) [$ns node]
$node_(203) set X_ 1971
$node_(203) set Y_ 645
$node_(203) set Z_ 0
set node_(204) [$ns node]
$node_(204) set X_ 689
$node_(204) set Y_ 851
$node_(204) set Z_ 0
set node_(205) [$ns node]
$node_(205) set X_ 1008
$node_(205) set Y_ 1719
$node_(205) set Z_ 0
set node_(206) [$ns node]
$node_(206) set X_ 1333
$node_(206) set Y_ 1694
$node_(206) set Z_ 0
set node_(207) [$ns node]
$node_(207) set X_ 610
$node_(207) set Y_ 1303
$node_(207) set Z_ 0
set node_(208) [$ns node]
$node_(208) set X_ 38
$node_(208) set Y_ 1994
$node_(208) set Z_ 0
set node_(209) [$ns node]
$node_(209) set X_ 1230
$node_(209) set Y_ 1636
$node_(209) set Z_ 0
set node_(210) [$ns node]
$node_(210) set X_ 1182
$node_(210) set Y_ 612
$node_(210) set Z_ 0
set node_(211) [$ns node]
$node_(211) set X_ 1026
$node_(211) set Y_ 135
$node_(211) set Z_ 0
set node_(212) [$ns node]
$node_(212) set X_ 191
$node_(212) set Y_ 1476
$node_(212) set Z_ 0
set node_(213) [$ns node]
$node_(213) set X_ 1266
$node_(213) set Y_ 1173
$node_(213) set Z_ 0
set node_(214) [$ns node]
$node_(214) set X_ 667
$node_(214) set Y_ 870
$node_(214) set Z_ 0
set node_(215) [$ns node]
$node_(215) set X_ 1628
$node_(215) set Y_ 894
$node_(215) set Z_ 0
set node_(216) [$ns node]
$node_(216) set X_ 601
$node_(216) set Y_ 567
$node_(216) set Z_ 0
set node_(217) [$ns node]
$node_(217) set X_ 459
$node_(217) set Y_ 56
$node_(217) set Z_ 0
set node_(218) [$ns node]
$node_(218) set X_ 814
$node_(218) set Y_ 1301
$node_(218) set Z_ 0
set node_(219) [$ns node]
$node_(219) set X_ 1052
$node_(219) set Y_ 233
$node_(219) set Z_ 0
set node_(220) [$ns node]
$node_(220) set X_ 379
$node_(220) set Y_ 428
$node_(220) set Z_ 0
set node_(221) [$ns node]
$node_(221) set X_ 1831
$node_(221) set Y_ 617
$node_(221) set Z_ 0
set node_(222) [$ns node]
$node_(222) set X_ 1127
$node_(222) set Y_ 854
$node_(222) set Z_ 0
set node_(223) [$ns node]
$node_(223) set X_ 1259
$node_(223) set Y_ 1304
$node_(223) set Z_ 0
set node_(224) [$ns node]
$node_(224) set X_ 842
$node_(224) set Y_ 145
$node_(224) set Z_ 0
set node_(225) [$ns node]
$node_(225) set X_ 1228
$node_(225) set Y_ 1618
$node_(225) set Z_ 0
set node_(226) [$ns node]
$node_(226) set X_ 1504
$node_(226) set Y_ 1640
$node_(226) set Z_ 0
set node_(227) [$ns node]
$node_(227) set X_ 727
$node_(227) set Y_ 705
$node_(227) set Z_ 0
set node_(228) [$ns node]
$node_(228) set X_ 1471
$node_(228) set Y_ 294
$node_(228) set Z_ 0
set node_(229) [$ns node]
$node_(229) set X_ 1170
$node_(229) set Y_ 1150
$node_(229) set Z_ 0
set node_(230) [$ns node]
$node_(230) set X_ 559
$node_(230) set Y_ 1587
$node_(230) set Z_ 0
set node_(231) [$ns node]
$node_(231) set X_ 609
$node_(231) set Y_ 585
$node_(231) set Z_ 0
set node_(232) [$ns node]
$node_(232) set X_ 1162
$node_(232) set Y_ 1766
$node_(232) set Z_ 0
set node_(233) [$ns node]
$node_(233) set X_ 1746
$node_(233) set Y_ 491
$node_(233) set Z_ 0
set node_(234) [$ns node]
$node_(234) set X_ 29
$node_(234) set Y_ 695
$node_(234) set Z_ 0
set node_(235) [$ns node]
$node_(235) set X_ 1688
$node_(235) set Y_ 1815
$node_(235) set Z_ 0
set node_(236) [$ns node]
$node_(236) set X_ 467
$node_(236) set Y_ 913
$node_(236) set Z_ 0
set node_(237) [$ns node]
$node_(237) set X_ 672
$node_(237) set Y_ 1276
$node_(237) set Z_ 0
set node_(238) [$ns node]
$node_(238) set X_ 279
$node_(238) set Y_ 464
$node_(238) set Z_ 0
set node_(239) [$ns node]
$node_(239) set X_ 1859
$node_(239) set Y_ 139
$node_(239) set Z_ 0
set node_(240) [$ns node]
$node_(240) set X_ 1331
$node_(240) set Y_ 916
$node_(240) set Z_ 0
set node_(241) [$ns node]
$node_(241) set X_ 69
$node_(241) set Y_ 978
$node_(241) set Z_ 0
set node_(242) [$ns node]
$node_(242) set X_ 1317
$node_(242) set Y_ 1114
$node_(242) set Z_ 0
set node_(243) [$ns node]
$node_(243) set X_ 149
$node_(243) set Y_ 1866
$node_(243) set Z_ 0
set node_(244) [$ns node]
$node_(244) set X_ 1650
$node_(244) set Y_ 1870
$node_(244) set Z_ 0
set node_(245) [$ns node]
$node_(245) set X_ 908
$node_(245) set Y_ 2
$node_(245) set Z_ 0
set node_(246) [$ns node]
$node_(246) set X_ 1467
$node_(246) set Y_ 1947
$node_(246) set Z_ 0
set node_(247) [$ns node]
$node_(247) set X_ 1498
$node_(247) set Y_ 100
$node_(247) set Z_ 0
set node_(248) [$ns node]
$node_(248) set X_ 1405
$node_(248) set Y_ 1888
$node_(248) set Z_ 0
set node_(249) [$ns node]
$node_(249) set X_ 1855
$node_(249) set Y_ 348
$node_(249) set Z_ 0

	
	  for {set i 1} {$i < $val(nn) } { incr i } {
	 $ns at [ expr 5+round(rand()*10) ] "$node_($i) setdest [ expr 10+round(rand()*1980) ] [ expr 10+round(rand()*1380) ] [ expr 300+round(rand()*10) ]"
	 #time --- x----y--- speed
     }



#UDP only
# Set a  UDP connection between nodes
set udp [new Agent/UDP]
$ns attach-agent $node_(2) $udp
set null [new Agent/Null]
$ns attach-agent $node_(148) $null
set cbr [new Application/Traffic/CBR]
$cbr attach-agent $udp
$cbr set packetSize_ 1024
$cbr set interval_ 0.1
$cbr set rate_ 250kb
$cbr set maxpkts_ 1000
$ns connect $udp $null
$ns at 0.1 "$cbr start"




# Define node initial position in nam
for {set i 0} {$i < $val(nn) } { incr i } {
# 30 defines the node size for nam
$ns initial_node_pos $node_($i) 40
}

# Telling nodes when the simulation ends
for {set i 0} {$i < $val(nn) } { incr i } {
    $ns at $val(stop) "$node_($i) reset";
}

# ending nam and the simulation
$ns at $val(stop) "$ns nam-end-wireless $val(stop)"
$ns at $val(stop) "stop"
$ns at 150 "puts \"end simulation\" ; $ns halt"
proc stop {} {
    global ns tracefd namtrace
    $ns flush-trace
    exec awk -f d.awk d.tr &
    close $tracefd
    close $namtrace
}

$ns run